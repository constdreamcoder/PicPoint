# PicPoint - ì‚¬ì§„ ìŠ¤íŒŸ ê³µìœ  ì•±

<p>
    <img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/b854d0e1-0e53-446f-901d-05eb958de02e" align="center" width="100%"/>
</p>

<br/>

## PicPoint

- ì„œë¹„ìŠ¤ ì†Œê°œ: ìì‹ ë§Œì˜ ì‚¬ì§„ ìŠ¤íŒŸ ê³µìœ  ì•±
- ê°œë°œ ì¸ì›: 1ì¸
- ê°œë°œ ê¸°ê°„: 24.04.12 ~ 24.05.05(ì´ 23ì¼)
- ê°œë°œ í™˜ê²½
  - ìµœì†Œë²„ì „: iOS 16
  - Portrait Orientation ì§€ì›
  - ë¼ì´íŠ¸ ëª¨ë“œ ì§€ì›

<br/>

## ğŸ’ª ì£¼ìš” ê¸°ëŠ¥

- íšŒì› ì¸ì¦: íšŒì› ê°€ì… / ë¡œê·¸ì¸ / íšŒì› íƒˆí‡´ / ë¡œê·¸ì•„ì›ƒ
- í”„ë¡œí•„ ì¡°íšŒ / ìˆ˜ì •
- Direct Message ê¸°ëŠ¥
- ê²Œì‹œê¸€
  - ê²Œì‹œê¸€ ì‘ì„± / ì‚­ì œ
  - ê²Œì‹œê¸€ ì¡°íšŒ
  - ê²Œì‹œê¸€ í›„ì›(ê²°ì œ ê¸°ëŠ¥)
  - ê²Œì‹œê¸€ ëŒ“ê¸€ ì‘ì„± / ì‚­ì œ
  - ì—°ê´€ ê²Œì‹œê¸€ ì¶”ì²œ ê¸°ëŠ¥
- ê²Œì‹œê¸€ ì¢‹ì•„ìš” / ì¢‹ì•„ìš” ì·¨ì†Œ
- í›„ì› ë‚´ì—­ ì¡°íšŒ
- ìœ ì € íŒ”ë¡œìš° / ì–¸íŒ”ë¡œìš°
- í•´ì‰¬íƒœê·¸

<br/>

## ğŸ›  ê¸°ìˆ  ì†Œê°œ

- MVVM íŒ¨í„´
  - UI ë¡œì§ê³¼ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì˜ ë¶„ë¦¬ ëª©ì ìœ¼ë¡œ ë„ì…
  - ViewModel í”„ë¡œí† ì½œ ì •ì˜í•˜ì—¬ êµ¬ì¡°ì ìœ¼ë¡œ ì¼ê´€ëœ ë·°ëª¨ë¸ êµ¬ì„±
- RxSwift
  - Input/Output íŒ¨í„´ì„ í™œìš©í•´ ë°ì´í„°ì˜ ë‹¨ë°©í–¥ íë¦„ êµ¬ì„±
- Repository íŒ¨í„´
  - Realm êµ¬ì„± ì‹œ Repository íŒ¨í„´ì„ í™œìš©í•´ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„° ê³„ì¸µì„ ë¶„ë¦¬ ë° ì¶”ìƒí™”
- Router íŒ¨í„´
  - Alamofireì˜ URLRequestConvertible í”„ë¡œí† ì½œë¥¼ ì¤€ìˆ˜í•˜ëŠ” ì»¤ìŠ¤í…€ TargetType êµ¬ì„±ìœ¼ë¡œ Router íŒ¨í„´ êµ¬í˜„
  - ì»¤ìŠ¤í…€ TargetType êµ¬ì„±ì„ í†µí•œìœ¼ë¡œ API í˜¸ì¶œì˜ Endpoint ê´€ë¦¬ë¥¼ ì¤‘ì•™í™”
- Alamofire
  - EventMonitor í”„ë¡œí† ì½œ ì±„íƒí•˜ì—¬ ì´ë²¤íŠ¸ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
  - RequestInterceptor í”„ë¡œí† ì½œì„ ì±„íƒí•˜ì—¬ í† í° ë§Œë£Œì‹œ ìë™ ê°±ì‹  êµ¬ì„±
  - ì»¤ìŠ¤í…€ Session êµ¬ì„±ìœ¼ë¡œ ì»¤ìŠ¤í…€ EventMonitorì™€ ì»¤ìŠ¤í…€ RequestInterceptor ì ìš©
- RxDatasoure
  - í”„ë¡œì íŠ¸ ë°˜ì‘í˜• êµ¬ì¡° êµ¬ì„±ì— ë”°ë¥¸ ë°ì´í„° ë°”ì¸ë”©ì„ ìœ„í•´ ë„ì…
  - Sectionë³„ ë‹¤ì–‘í•œ íƒ€ì…ì˜ Cell ëŒ€ì‘
  - ì—´ê±°í˜•ì„ í†µí•œ Section ë¶„ë¦¬ êµ¬ì„±
- SnapKit
  - DSLë¥¼ í™œìš©í•œ AutoLayout ì½”ë“œ ê°„ì†Œí™” ë° ê°€ë…ì„± í–¥ìƒ
- Modern CollectionView
  - ê¸°ê¸°ì˜ ë‹¤ì–‘í•œ í•´ìƒë„ ëŒ€ì‘ì„ ìœ„í•´ UICollectionViewCompositionalLayout í™œìš©
- MapKit
  - CLLocationManager í´ë˜ìŠ¤ ìƒì†ì„ í†µí•œ ì»¤ìŠ¤í…€ LocationManger êµ¬ì„±
  - MKLocalSearchCompleterë¥¼ í™œìš©í•œ ì¥ì†Œ ì‹¤ì‹œê°„ ê²€ìƒ‰ êµ¬ì„±
  - reverseGeocodeLocation(\_:completionHandler:) ë©”ì„œë“œë¥¼ í†µí•œ ì£¼ì†Œ ê²€ìƒ‰ êµ¬ì„±
- IAMPort
  - ë‹¤ì–‘í•œ PGì‚¬ë¥¼ í†µí•œ ê²°ì œë¥¼ ìœ„í•´ ë„ì…
  - ê²Œì‹œê¸€ë³„ í›„ì› ìˆ˜ë‹¨ìœ¼ë¡œ í™œìš©
- NWPathMonitor
  - NWPathMonitor ì‹¤ì‹œê°„ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§ êµ¬ì„±
  - ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ ê°ì§€ ì‹œ ìƒìœ„ ê³„ì¸µì˜ ë˜ ë‹¤ë¥¸ window êµ¬ì„±ìœ¼ë¡œ ì‚¬ìš©ìì—ì„œ ì—°ê²° ìƒíƒœ ì „ë‹¬
- LocalizedError
  - ì—´ê±°í˜•ì— LocalizedError í”„ë¡œí† ì½œì„ ì±„íƒí•˜ì—¬ Status Codeì— ë”°ë¥¸ ì˜¤ë¥˜ ì½”ë“œ ë° ì˜¤ë¥˜ ë©”ì„¸ì§€ ì¬ì •ì˜
- SocketIO
  - Direct Message ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•œ ì†Œì¼“ í†µì‹  êµ¬ì„±ì— í™œìš©
- RealmSwift
  - Direct Message ê¸°ëŠ¥ì— ì±„íŒ… ë‚´ì—­ ì €ì¥ì— í™œìš©
- Property Wrapper
  - Property Wrapperë¥¼ í™œìš©í•œ UserDefaults ì½”ë“œ ê°„ì†Œí™”
- Kingfisher
  - Headerë¥¼ í†µí•œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ, ìºì‹±, í‘œì‹œì— í™œìš©
- PHAsset
  - PHAssetë¥¼ ì´ìš©í•œ ì»¤ìŠ¤í…€ Gallery êµ¬ì„±

<br/>

## ğŸ’» êµ¬í˜„ ë‚´ìš©

### 1. RxSwift + Input/Output patternì„ ì´ìš©í•œ ê²Œì‹œê¸€ ë“±ë¡ ìœ íš¨ì„± ê²€ì‚¬

  |<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/c5cdc8ad-016e-4ba6-bd13-d41760b08ea7" align="center" width="200">|<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/fb87d27d-03f1-4b86-863b-9f405cffb0c4" align="center" width="200">|<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/71b507ca-d7e8-49ee-9844-362b9101aeca" align="center" width="200">|
  |:--:|:--:|:--:|
  |ì—…ë¡œë“œí•  ì‚¬ì§„|ìœ„ì¹˜ì„ íƒ|ì¶”ì²œ ë°©ë¬¸ ì‹œê°„ëŒ€|

  |<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/776537a7-2ce4-46b4-9cca-7bcc36f61486" align="center" width="200">|<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/0bf38dcd-ebb0-4e11-be2e-24e4d1343c9b" align="center" width="200">|
  |:--:|:--:|
  |ë°©ë¬¸ì¼|ì œëª©, ë³¸ë¬¸|

- ê° ì´ë²¤íŠ¸ë¥¼ Inputìœ¼ë¡œ ì „ë‹¬

- transform ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ ìœ íš¨ì„± ê²€ì‚¬ í›„ Output ê²°ê³¼ ì „ë‹¬
  <details>
  <summary><b>Input/Output pattern</b></summary>
  <div markdown="1">

  ```swift
  final class AddPostViewModel: ViewModelType {
      var disposeBag = DisposeBag()

      struct Input {
          let titleText: ControlEvent<String>
          // ...
      }

      struct Output {
      let registerButtonValid: Driver<Bool>
      // ...
      }

      func transfor(input: Input) -> Output {

          return Output(
              registerButtonValid: registerButtonValid.asDriver(onErrorJustReturn: false)
              // ...
          )
      }
  }
  ```

  </div>
  </details>

<br/>

- ê²Œì‹œê¸€ ë“±ë¡ ì‹œ ê³¼ë„í•œ ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ ë°©ì§€ë¥¼ ìœ„í•´ **.debounce(.seconds(1), scheduler: MainScheduler.instance) ì‚¬ìš©**

  <details>
  <summary><b>.debounce(.seconds(1), scheduler: MainScheduler.instance)</b></summary>
  <div markdown="1">

  ```swift
  input.rightBarButtonItemTap
            .debounce(.seconds(1), scheduler: MainScheduler.instance)
            .map {
              //...
            }
            .subscribe(with: self) {
              // ...
            }
            .disposed(by: disposeBag)
  ```

  </div>
  </details>

<br/>

### 2. Alamofire RequestInterceptorë¥¼ í†µí•œ JWT ê°±ì‹ 

<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/27ae90f6-5265-4d2b-a1ce-d87e83d992a6" align="center"/>

<br/>

- RequestInterceptorë¥¼ ìƒì†ë°›ì•„ UserDefaultsì— ì €ì¥ëœ Access Tokenì˜ ìœ íš¨ì„± ê²€ì¦ í›„, í•„ìš” ì‹œ í† í° ê°±ì‹ 
    <details>
    <summary><b>RequestInterceptor êµ¬í˜„</b></summary>
    <div markdown="1">

    ```swift
    final class TokenRefresher: RequestInterceptor {
        
        func adapt(_ urlRequest: URLRequest, for session: Session, completion: @escaping (Result<URLRequest, Error>) -> Void) {
                // ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì „ Headerì— Access í† í° ì¶”ê°€
            var urlRequest = urlRequest
            let token = UserDefaults.standard.accessToken
            urlRequest.setValue(token, forHTTPHeaderField: HTTPHeader.authorization.rawValue)
            
            completion(.success(urlRequest))
        }
    
        func retry(_ request: Request, for session: Session, dueTo error: Error, completion: @escaping (RetryResult) -> Void) {
                // Access í† í°ì¸ ë§Œë£Œë˜ì§€ ì•Šì€ ê²½ìš°
            guard let response = request.task?.response as? HTTPURLResponse,
                response.statusCode == 419
            else {
                completion(.doNotRetryWithError(error))
                return
            }
                    
            // Access í† í°ì´ ë§Œë£Œëœ ê²½ìš°        
            let refreshToken = UserDefaults.standard.refreshToken
            if !refreshToken.isEmpty {
                UserManager.refreshToken { [weak self] response in
                    guard let self else { return }
                    switch response {
                    case .success(let refreshedAccessToken):
                        UserDefaults.standard.accessToken = refreshedAccessToken
                        completion(.retry)
                    case .failure(let error):
                        print("failure")
                        print(error.errorCode, error.errorDesc)
                        if error.errorCode == 418 || error.errorCode == 401 {
                            NotificationCenter.default.post(name: .refreshTokenExpired, object: nil, userInfo: ["showReloginAlert": true])
                        }
                        completion(.doNotRetryWithError(error))
                    }
                }
            }
            
        }
    }
    ```

    </div>
    </details>

<br/>

### 3. LocalizedError í”„ë¡œí† ì½œ ì±„íƒì„ í†µí•œ ì—ëŸ¬ íƒ€ì… ì¶”ìƒí™”

- í”„ë¡œì íŠ¸ ë‚´ ì—ëŸ¬ ì²˜ë¦¬ ê³¼ì •
    1. Status Code(Int íƒ€ì… RawValue)ë¥¼ í†µí•œ ì—ëŸ¬ ë°©ì¶œ
    2. LocalizedError í”„ë¡œí† ì½œ ì±„íƒìœ¼ë¡œ errorDescription ë³€ìˆ˜ë¥¼ í†µí•œ ì—ëŸ¬ ë©”ì„¸ì§€ ì •ì˜
    3. ì—ëŸ¬ ë°©ì¶œ ì‹œ, errorMessageì— ì •ì˜ëœ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ error.localizedDescription ì„ í†µí•´ ì™¸ë¶€ì—ì„œ alert í˜¹ì€ logë¡œì„œ í™œìš©

    <details>
    <summary><b>LocalizedError ì±„íƒ</b></summary>
    <div markdown="1">

    ```swift
    // ê³µí†µ ì—ëŸ¬ ì •ì˜
    enum CommonNetworkError: Int, LocalizedError {
        case invalidSesacKey = 420
        case excessiveCalls = 429
        case invalidURL = 444
        case serveError = 500
        case unknownError = 999
        
        var errorDescription: String? {
            switch self {
            // caseë³„ ì—ëŸ¬ ë©”ì„¸ì§€ ì •ì˜
            }
        }
    }

    // ì¢‹ì•„ìš” API ì—ëŸ¬ ì •ì˜
    enum LikeUnlikePostNetworkError: Int, LocalizedError {
        case badRequest = 400
        case unauthorizedAccessToken = 401
        case forbidden = 403
        case noPostForLikeUnlike = 410
        case expiredAccessToken = 419
        
        var errorDescription: String? {
            switch self {
                // caseë³„ ì—ëŸ¬ ë©”ì„¸ì§€ ì •ì˜
            }
        }
    }

    // ì¢‹ì•„ìš” ì´ë²¤íŠ¸
    likeTrigger
        .flatMap {
            LikeManager.like(
                params: LikeParams(postId: $0),
                body: LikeBody(like_status: true)
            )
            .catch { error in
            // error.localizedDescriptionì„ í†µí•œ ì—ëŸ¬ ë©”ì„¸ì§€ ì „ë‹¬
                print(error.errorCode, error.errorDesc)
                return Single<String>.never()
            }
        }
    ```

    </div>
    </details>

<br/>

### 4. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë‹¨ì ˆ ëŒ€ì‘

<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/c2c56e87-e60a-483d-b669-dd231767463d" align="center" width="200"/>

<br/>

- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë‹¨ì ˆ ê°ì§€ ê³¼ì •
    
    1. ì•± ì‹œë™ ì‹œ SceneDelegateì—ì„œ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ì‹¤ì‹œê°„ í™•ì¸ ì‹œì‘
    
    2. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë‹¨ì ˆ ì‹œ, ìƒˆë¡œìš´ windowë¥¼ ìƒì„±í•˜ì—¬ ê¸°ì¡´ window ìœ„ì— ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ê´€í•œ ì—ëŸ¬ ì‚¬í•­ í‘œì‹œ
    
    <details>
    <summary><b>ì‹¤ì‹œê°„ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸</b></summary>
    <div markdown="1">

    ```swift
    // ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§ ê°ì²´ ì •ì˜
    final class NetworkMonitor {
        private let queue = DispatchQueue.global(qos: .background)
        private let monitor: NWPathMonitor
        
        init() {
            monitor = NWPathMonitor()
        }
        
        func startMonitoring(statusUpdateHandler: @escaping (NWPath.Status) -> Void) {
                // ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ì‹¤ì‹œê°„ í™•ì¸
            monitor.pathUpdateHandler = { path in
                DispatchQueue.main.async {
                    statusUpdateHandler(path.status)
                }
            }
            monitor.start(queue: queue)
        }
        
        func stopMonitoring() {
            monitor.cancel()
        }
    }

    // SceneDelegate.swift
    var window: UIWindow?
    var errorWindow: UIWindow?

    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {

            networkMonitor.startMonitoring(statusUpdateHandler: { [weak self] connectionStatus in
            guard let self else { return }
            switch connectionStatus {
            // ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœê°€ ì›í• í•œ ê²½ìš°, ì—ëŸ¬ í‘œì‹œìš© windowë¥¼ í™”ë©´ì—ì„œ ì œê±°
            case .satisfied:
                removeNetworkErrorWindow()
            // ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœê°€ ì›í• í•˜ì§€ ì•Šì„ ê²½ìš°, ê¸°ì¡´ window ìœ„ì— ì—ëŸ¬ ì‚¬í•­ í‘œì‹œìš© window ìƒì„±
            case .unsatisfied:
                loadNetworkErrorWindow(on: scene)
            default:
                break
            }
        })
    }

    extension SceneDelegate {
            // ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì‚¬í•­ í‘œì‹œë¥¼ ìœ„í•œ ìƒˆë¡œìš´ window ìƒì„± ì •ì˜
        private func loadNetworkErrorWindow(on scene: UIScene) {
            if let windowScene = scene as? UIWindowScene {
                let window = UIWindow(windowScene: windowScene)
                // ê¸°ì¡´ window levelì„ statusBarë¡œ ìƒì„±í•´ì¤Œìœ¼ë¡œì¨ ê¸°ì¡´ windowë³´ë‹¤ ìƒìœ„ì— í‘œì‹œ
                window.windowLevel = .statusBar 
                window.makeKeyAndVisible()
                
                let noNetworkView = NoNetworkView(frame: window.bounds)
                window.addSubview(noNetworkView)
                self.errorWindow = window
            }
        }
        
        // ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ë³µê·€ë¡œ ì¸í•œ window ì œê±° ì •ì˜
        private func removeNetworkErrorWindow() {
            errorWindow?.resignKey()
            errorWindow?.isHidden = true
            errorWindow = nil
        }
    }
    ```

    </div>
    </details>
        
<br/>

### 5. ë„¤íŠ¸ì›Œí¬ ìš”ì²­/ì‘ë‹µ ë¡œê·¸ êµ¬ì„±

- ë„¤íŠ¸ì›Œí¬ í†µì‹ ë§ˆë‹¤ ì–´ë–¤ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ì§€ ë¡œê·¸ êµ¬ì„±

    <details>
    <summary><b>EventMonitor í”„ë¡œí† ì½œ ì±„íƒìœ¼ë¡œ êµ¬ì„±í•œ ë¡œê·¸ í´ë˜ìŠ¤ ì½”ë“œ</b></summary>
    <div markdown="1">

    ```swift
    final class EventLogger: EventMonitor {
        let queue = DispatchQueue(label: "NetworkLogger")
        
        func requestDidFinish(_ request: Request) {
            print("[ìš”ì²­ ì™„ë£Œ]\n")
            
            print("[ìš”ì²­ í—¤ë”]")
            print("URL: \(request.request?.url?.absoluteString ?? "")")
            print("Method: \(request.request?.httpMethod ?? "")")
            print("Headers: \(request.request?.allHTTPHeaderFields ?? [:])\n")
            
            print("[ìš”ì²­ ë°”ë””]")
            if let body = request.request?.httpBody?.toPrettyPrintedString {
                print("Body: \(body)\n\n")
            } else { print("ë³´ë‚¸ Bodyê°€ ì—†ìŠµë‹ˆë‹¤.\n\n")}
        }
        
        func request<Value>(_ request: DataRequest, didParseResponse response: DataResponse<Value, AFError>) {
            switch response.result {
            case .success(_):
                print("ì„œë²„ ì—°ê²° ì„±ê³µ")
            case .failure(_):
                print("ì„œë²„ ì—°ê²° ì‹¤íŒ¨")
                print("ì˜¬ë°”ë¥¸ URLì¸ì§€ í™•ì¸í•´ë³´ì„¸ìš”.")
            }
            
            print("[ì‘ë‹µ ì™„ë£Œ]\n")
            
            print("[ìƒíƒœ ì½”ë“œ]")
            print("\(response.response?.statusCode ?? 0)\n")
            
            if let statusCode = response.response?.statusCode {
                switch statusCode {
                case 400..<500:
                    print("ì˜¤ë¥˜ ë°œìƒ : RequestError\n" + "ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤. requestë¥¼ ì¬ì‘ì„± í•´ì£¼ì„¸ìš”.")
                case 500:
                    print("ì˜¤ë¥˜ ë°œìƒ : ServerError\n" + "Serverì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")
                default:
                    break
                }
            }
            
            print("[ì‘ë‹µ ë°ì´í„°]")
            if let response = response.data?.toPrettyPrintedString {
                print(response)
            } else { print("ë°ì´í„°ê°€ ì—†ê±°ë‚˜, Encodingì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}
        }
        
        
        func request(_ request: Request, didFailTask task: URLSessionTask, earlyWithError error: AFError) {
            print("URLSessionTaskê°€ Fail í–ˆìŠµë‹ˆë‹¤.")
        }
        
        func request(_ request: Request, didFailToCreateURLRequestWithError error: AFError) {
            print("URLRequestë¥¼ ë§Œë“¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")
        }
        
        func requestDidCancel(_ request: Request) {
            print("requestê°€ cancel ë˜ì—ˆìŠµë‹ˆë‹¤")
        }
    }

    ```

    </div>
    </details>

    - ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ë¡œê·¸
    
        <img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/46eef451-4085-48f3-b6ea-408060b3b13f" align="center"/>
    
    - ë„¤íŠ¸ì›Œí¬ ì‘ë‹µ ë¡œê·¸
    
        <img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/09851846-9432-4c6d-9409-7c5298da10fd" align="center"/>

<br/>

### 6. ì»¤ìŠ¤í…€ UICollectionViewLayout êµ¬ì„±ìœ¼ë¡œ í•€í„°ë ˆìŠ¤íŠ¸ UI êµ¬í˜„
        
<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/ad4bf231-9d31-4e3e-8a7e-96dac00c30d8" align="center" width="200"/>

- ê° ì‚¬ì§„ì˜ ê°€ë¡œ/ì„¸ë¡œ ë¹„ìœ¨ì— ë”°ë¥¸ ë‹¤ì´ë‚˜ë¯¹í•œ ì…€ì˜ í¬ê¸°ë¥¼ ê°€ì§€ê³  ìˆëŠ” í•€í„°ë ˆìŠ¤íŠ¸ UI êµ¬í˜„ì„ ìœ„í•´ ì»¤ìŠ¤ì»´ UICollectionViewLayout êµ¬ì„±

  <details>
  <summary><b>ì»¤ìŠ¤í…€ UICollectionViewLayout ì½”ë“œ</b></summary>
  <div markdown="1">

  ```swift
  protocol PinterestLayoutDelegate: AnyObject {
    func collectionView(
        _ collectionView: UICollectionView,
        heightForPhotoAtIndexPath indexPath: IndexPath) -> CGFloat
    }

    final class PinterestLayout: UICollectionViewLayout {
        weak var delegate: PinterestLayoutDelegate?
        
        private let numberOfColumns = 2
        private let cellPadding: CGFloat = 6
        
        private var cache: [UICollectionViewLayoutAttributes] = []
        
        private var contentHeight: CGFloat = 0
        
        private var contentWidth: CGFloat {
            guard let collectionView = collectionView else {
                return 0
            }
            let insets = collectionView.contentInset
            return collectionView.bounds.width - (insets.left + insets.right)
        }
        
        override var collectionViewContentSize: CGSize {
            return CGSize(width: contentWidth, height: contentHeight)
        }
    }

    extension PinterestLayout {
        override func prepare() {
            
            cache.removeAll()
            contentHeight = 0
            
            guard
                cache.isEmpty,
                let collectionView = collectionView
            else { return }
            
            let columnWidth = contentWidth / CGFloat(numberOfColumns)
            var xOffset: [CGFloat] = []
            for column in 0..<numberOfColumns {
                xOffset.append(CGFloat(column) * columnWidth)
            }
            var column = 0
            var yOffset: [CGFloat] = .init(repeating: 0, count: numberOfColumns)
            
            for item in 0..<collectionView.numberOfItems(inSection: 0) {
                let indexPath = IndexPath(item: item, section: 0)
                
                let photoHeight = delegate?.collectionView(
                    collectionView,
                    heightForPhotoAtIndexPath: indexPath) ?? 180
                let height = cellPadding * 2 + photoHeight
                let frame = CGRect(x: xOffset[column],
                                y: yOffset[column],
                                width: columnWidth,
                                height: height)
                let insetFrame = frame.insetBy(dx: cellPadding, dy: cellPadding)
                
                let attributes = UICollectionViewLayoutAttributes(forCellWith: indexPath)
                attributes.frame = insetFrame
                cache.append(attributes)
                
                contentHeight = max(contentHeight, frame.maxY)
                yOffset[column] = yOffset[column] + height
                
                column = column < (numberOfColumns - 1) ? (column + 1) : 0
            }
        }
    }

    extension PinterestLayout {
        override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
            var visibleLayoutAttributes: [UICollectionViewLayoutAttributes] = []
            
            for attributes in cache {
                if attributes.frame.intersects(rect) {
                    visibleLayoutAttributes.append(attributes)
                }
            }
            return visibleLayoutAttributes
        }
        
        override func layoutAttributesForItem(at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
            return cache[indexPath.item]
        }
    }
  ```
  
  </div>
  </details>

<br/>

### 7. SocketIOë¥¼ í†µí•œ ì±„íŒ… ê¸°ëŠ¥ êµ¬í˜„(Direct Message)

- SocketIOë¥¼ í†µ ì±„íŒ… ê¸°ëŠ¥ êµ¬í˜„

  <details>
  <summary><b>ì±„íŒ… ì†Œì¼“ êµ¬ì„± ì½”ë“œ</b></summary>
  <div markdown="1">

  ```swift
    final class SocketIOManager {

    static let shared = SocketIOManager()

        private var manager: SocketManager?
        private var socket: SocketIOClient?

        // ìˆ˜ì‹ ëœ ì±„íŒ… ë‚´ì—­ ì™¸ë¶€ë¡œ ë°˜í™˜
        let ReceivedChatDataSubject = PublishSubject<Chat>()

        // ì†Œì¼“ í†µì‹  Manager ìƒì„±
        private init() {
            guard let url = URL(string: APIKeys.baseURL) else { return }
            manager = SocketManager(socketURL: url, config: [.log(true), .compress])
        }

        // ì†Œì¼“ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        func setupSocketEventListeners(_ namespace: String) {
            guard let manager else { return }
            socket = manager.socket(forNamespace: "/chats-\(namespace)")
            guard let socket else { return }
            
            socket.on(clientEvent: .connect) { data, ack in
                print("SOCKET IS CONNECTED", data, ack)
            }
            
            socket.on(clientEvent: .disconnect) { data, ack in
                print("SOCKET IS DISCONNECTED", data, ack)
            }
            
            socket.on("chat") { [weak self] dataArray, ack in
                guard let self else { return }
                print("chat received")
                
                if let data = dataArray.first {
                    
                    do {
                        let result = try JSONSerialization.data(withJSONObject: data)
                        let decodedData = try JSONDecoder().decode(Chat.self, from: result)
                        ReceivedChatDataSubject.onNext(decodedData)
                    } catch {
                        print("Chatting Recevied Parsing Error", error.localizedDescription)
                    }
                }
            }
        }

        // ì†Œì¼“ ì—°ê²°
        func establishConnection() {
            socket?.connect()
        }

        // ì†Œì¼“ ì—°ê²° í•´ì œ
        func leaveConnection() {
            socket?.disconnect()
        }

        // ì†Œì¼“ ì´ë²¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ì œê±°
        func removeAllEventHandlers() {
            print("Clear up all handlers.")
            print("socket handler count", socket?.handlers.count)
            socket?.removeAllHandlers()
        }
    }
  ```
  
  </div>
  </details>

- í”„ë¡œì íŠ¸ ë‚´ ì±„íŒ… ì†Œì¼“ ì²˜ë¦¬ ê³¼ì •

    - ì±„íŒ… ë‚´ì—­ ì¡°íšŒ ê³¼ì •
        
        1. ì±„íŒ…í™”ë©´ ì§„ì… í›„, Local DB(Realm)ì—ì„œ ì €ì¥ëœ ì±„íŒ… ë‚´ì—­ ì¡°íšŒ
        
        2. ê°€ì¥ ë§ˆì§€ë§‰ ë‚ ì§œì— ì „ì†¡ëœ ì±„íŒ… ë‚ ì§œë¥¼ ì„œë²„ì— ìš”ì²­
        
        3. ìš”ì²­ í›„, ìƒˆë¡œìš´ ë°ì´í„°(ì±„íŒ… ë§ˆì§€ë§‰ ë‚´ì—­ ì´í›„ ì‘ì„±ëœ ì±„íŒ… ë‚´ì—­)ì´ ìˆë‹¤ë©´ DBì— ì €ì¥ í›„, ì±„íŒ… í™”ë©´(TableView) ê°±ì‹ 
        
        4. ëª¨ë“  ê³¼ì •ì´ ëë‚œ ì´í›„ , ì†Œì¼“ ì—°ê²°
        
        |<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/b5a4c574-e5e9-4c5c-a903-9720e55ff4a0" align="center" width="200"/>|
        |:--:|
        |ì±„íŒ… ì¡°íšŒ|

    <br/>

    - ì±„íŒ… ë°œì†¡ ë° ìˆ˜ì‹  ê³¼ì •
        
        - ì±„íŒ… ì†¡ì‹ 
            
            1. HTTP í†µì‹ ì„ í†µí•´ ì±„íŒ… ë‚´ìš© ì„œë²„ë¡œ ì „ì†¡
            
            2. ì„œë²„ì—ì„œ ì „ì†¡ëœ ì±„íŒ… ë‚´ìš©ì„ ì†Œì¼“ í†µì‹ ì„ í†µí•´ ìˆ˜ì‹ 
        
        - ì±„íŒ… ë°œì‹ 
            
            1. ì„œë²„ë¡œë¶€í„° ìƒëŒ€ë°©ì´ ì†¡ì‹ í•œ ì±„íŒ… ë‚´ì—­ ì†Œì¼“ í†µì‹ ì„ í†µí•´ ìˆ˜ì‹ 

        |<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/75f3e89d-50eb-4c5c-a4b8-fbdb18ad1b56" align="center" width="400"/>|
        |:--:|
        |ì±„íŒ… ì†¡ìˆ˜ì‹  ë™ì‘ í™”ë©´|

<br/>

### 8. Headerë¥¼ ì´ìš©í•œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ

- Headerë¥¼ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•´ Kingfisher Extensionì— ì»¤ìŠ¤í…€ ë©”ì„œë“œ êµ¬ì„±
  
  <details>
  <summary><b>Kingfisher ì»¤ìŠ¤í…€ ë©”ì„œë“œ êµ¬ì„± ì½”ë“œ</b></summary>
  <div markdown="1">

  ```swift
  extension KingfisherWrapper where Base: UIImageView {
    func setImageWithAuthHeaders(
        with resource: Resource?,
        placeholder: Placeholder? = nil,
        options: KingfisherOptionsInfo? = nil,
        progressBlock: DownloadProgressBlock? = nil,
        completionHandler: ((Result<RetrieveImageResult, KingfisherError>) -> Void)? = nil
    ) {
            // Header ì¶”ê°€ë¥¼ ìœ„í•œ URLRequest êµ¬ì„±
            let imageDownloadRequest = AnyModifier { request in
                var requestBody = request
                requestBody.setValue(UserDefaultsManager.accessToken, forHTTPHeaderField: HTTPHeader.authorization.rawValue)
                requestBody.setValue(APIKeys.sesacKey, forHTTPHeaderField: HTTPHeader.sesacKey.rawValue)
                return requestBody
            }
        
            // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•œ ì˜µì…˜ êµ¬ì„±
            let newOptions: KingfisherOptionsInfo = options ?? [] + [.requestModifier(imageDownloadRequest), .cacheMemoryOnly]
            
            self.setImage(
                with: resource,
                placeholder: placeholder,
                options: newOptions,
                progressBlock: progressBlock,
                completionHandler: completionHandler
            )
        }
    }

  ```
  
  </div>
  </details>

<br/>

### 9.  Resizable Imageì„ ì´ìš©í•œ ì±„íŒ… ë§í’ì„  êµ¬í˜„

<br/>

### 10. Custom Viewë¡œ êµ¬ì„±

- ê³µí†µì ì¸ UI ìš”ì†Œë“¤ Custom Viewë¡œ ì •ì˜í•˜ì—¬ ì¬í™œìš©

<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/e072eeca-03bb-4448-b64a-96cb0e9dd135" align="center" width= "200"/>

<br/>

### 11. Input/Output íŒ¨í„´ í”„ë¡œí† ì½œë¡œ ì¶”ìƒí™”

- Input/Output íŒ¨í„´ í”„ë¡œí† ì½œë¡œ ì¶”ìƒí™”
  <details>
  <summary><b>Input/Output íŒ¨í„´ ì¶”ìƒí™” ì½”ë“œ</b></summary>
  <div markdown="1">

  ```swift
  protocol ViewModelType {
    associatedtype Input
    associatedtype Output
    
    var disposeBag: DisposeBag { get set }
    
    func transform(input: Input) -> Output
  }
  ```
  
  </div>
  </details> 
  
<br/> 

## ğŸ”¥ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. Dynamic Islandë¡œ ì¸í•œ ê¸°ê¸°ë³„ Layout ì°¨ì´ ëŒ€ì‘

ë¬¸ì œìƒí™©

- UICollectionViewFlowLayoutìœ¼ë¡œ Layout êµ¬ì„± ì‹œ ê° Cellë§ˆë‹¤ í•˜ë‹¨ì— ì•½ê°„ì˜ ì˜¤ì°¨ ë°œìƒí•˜ì—¬ ìŠ¤í¬ë¡¤í•  ë•Œë§ˆë‹¤ Cellì´ í™”ë©´ì—ì„œ ì˜¤ì°¨ë§Œí¼ ì˜¬ë¼ê°€ëŠ” í˜„ìƒ ë°œìƒ

  <details>
  <summary><b>UICollectionViewFlowLayoutë¡œ êµ¬ì„±í–ˆë˜ ì½”ë“œ</b></summary>
  <div markdown="1">

  ```swift
  func createCollectionViewLayout() -> UICollectionViewLayout {
      let layout = UICollectionViewFlowLayout()
      let width = UIScreen.main.bounds.width
      
      // Safe Area Inset ìƒë‹¨ ë†’ì´ êµ¬í•˜ê¸°
      let scenes = UIApplication.shared.connectedScenes
      let windowScene = scenes.first as? UIWindowScene
      let window = windowScene?.windows.first
      let topPadding = window?.safeAreaInsets.top ?? 0
      
      // NavigationBar ë†’ì´ êµ¬í•˜ê¸°
      let navBarHeight = navigationController?.navigationBar.bounds.height ?? 0
      
      // TabBar ë†’ì´ êµ¬í•˜ê¸°
      let tabBarHeight = tabBarController?.tabBar.bounds.height ?? 0
      
      // ê¸°ê¸° í™”ë©´ í¬ê¸°ì—ì„œ Safe Area Inset ìƒë‹¨, NavigationBar ë†’ì´, TabBar ë†’ì´ë§Œí¼ ê°ê° ë¹¼ì–´ì£¼ì–´ Cell ë†’ì´ ì •ì˜
      let height = UIScreen.main.bounds.height - (topPadding + navBarHeight + tabBarHeight)
      layout.itemSize = CGSize(width: width, height: height)
      layout.minimumLineSpacing = 0
      layout.minimumInteritemSpacing = 0
      layout.sectionInset = UIEdgeInsets(top: 0, left: 0, bottom: 0, right: 0)
      
      return layout
  }
  ```
  
  </div>
  </details>

  <img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/c19de329-e9d6-4872-b470-0207ab9b9b46" align="center" width="200"/>

<br/>

ë¬¸ì œ ì›ì¸ íŒŒì•…

<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/7c220f44-36a3-4f5e-a3ca-761f26bf7786" align="center" width="500"/>

- iPhone 14 Proë¶€í„° ë„ì…ëœ Dynamic Islandë¡œ ì¸í•´ Status barì˜ ë†’ì´ì™€ Safe Area Insetsì˜ topì—ì„œ ì°¨ì´ê°€ ë°œìƒí•˜ì—¬ í™ˆ í™”ë©´ í”¼ë“œ êµ¬ì„± ì‹œ Collection View Layoutìœ¼ë¡œëŠ” ì˜¤ì°¨ê°€ í•­ìƒ ë°œìƒí•˜ì˜€ë˜ ê²ƒ
    - **Status bar(ìƒíƒœ í‘œì‹œì¤„)ì˜ ë†’ì´ëŠ” 54í¬ì¸íŠ¸**
    - **Safe Area Insets (portrait): top: 59, bottom: 34, left: 0, right: 0**

í•´ê²°ë°©ë²•

- Modern CollectionViewì¸ UICollectionViewCompositionalLayoutìœ¼ë¡œ ëŒ€ì‘

  <details>
  <summary><b>UICollectionViewCompositionalLayoutìœ¼ë¡œ ëŒ€ì‘</b></summary>
  <div markdown="1">

  ```swift
  extension HomeViewController: UICollectionViewConfiguration {
        func createCollectionViewLayout() -> UICollectionViewLayout {
        
            let itemSize = NSCollectionLayoutSize(
                widthDimension: .fractionalWidth(1.0),
                heightDimension: .fractionalHeight(1.0)
            )
            let item = NSCollectionLayoutItem(layoutSize: itemSize)
            
            let groupSize = NSCollectionLayoutSize(
                widthDimension: .fractionalWidth(1.0),
                heightDimension: .fractionalHeight(1.0)
            )
            let group = NSCollectionLayoutGroup.horizontal(
                layoutSize: groupSize,
                subitems: [item]
            )
            
            let section = NSCollectionLayoutSection(group: group)
            
            return UICollectionViewCompositionalLayout(section: section)
        }
    }
  ```
  
  </div>
  </details>
  
<br/>

### 2. RxDataSource í™œìš©í•œ ì—¬ëŸ¬ íƒ€ì…ì˜ Section êµ¬í˜„

ë¬¸ì œìƒí™©

- ë‹¤ì¤‘ íƒ€ì…ì˜ Section ì •ì˜í•œ í›„, dataSourceë¥¼ êµ¬ì„±í•  ë•Œ ê° Sectionì˜ ê³µí†µ íƒ€ì…ì¸ SectionModelTypeì„ dataSourceì˜ ì œë„¤ë¦­ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš© ë¶ˆê°€

<img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/3061940f-41aa-4262-8c7e-314fd2ec05c4" align="center"/>

<br/>

ë¬¸ì œ ì›ì¸ íŒŒì•…

- SectionTypeModelì˜ ê²½ìš°, Associated Typeìœ¼ë¡œ êµ¬ì„±ë˜ì–´ì ¸ ìˆëŠ” í”„ë¡œí† ì½œì´ê¸° ë•Œë¬¸ì—, Itemì˜ íƒ€ì…ì´ êµ¬ì²´ì ì´ì§€ ì•Šì•„ ì»´íŒŒì¼ ì‹œ ë³€ìˆ˜ì˜ í• ë‹¹ í¬ê¸° ë“±ì„ ê²°ì •í•  ìˆ˜ ì—†ì–´ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²ƒ
  <details>
  <summary><b>SectionModelType í”„ë¡œí† ì½œ ì •ì˜</b></summary>
  <div markdown="1">

  ```swift
  public protocol SectionModelType {
    associatedtype Item

    var items: [Item] { get }

    init(original: Self, items: [Item])
  }
  ```

  </div>
  </details>

í•´ê²°ë°©ë²• - Type Erasure Wrapper

- ê¸°ì¡´ Section í´ë˜ìŠ¤ë¥¼ ê°ì‹¸ëŠ” Type Erasure Wrapper í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ê¸°ì¡´ íƒ€ì…ì„ ì—†ì•¤ í›„, Section êµ¬ì„±
    <details>
    <summary><b>Type Erasure Wrapper</b></summary>
    <div markdown="1">

    ```swift
    import RxDataSources

    class AnySectionModel: SectionModelType {
        var items: [Item]
        
        init<S: SectionModelType>(_ sectionModel: S) {
            self.items = sectionModel.items
        }
        
        required init(original: AnySectionModel, items: [Item]) {
            self.items = items
        }
    }

    extension AnySectionModel {
        typealias Item = Any
    }
    ```

    </div>
    </details>
    
<br/>
   
### 3. ì†Œì¼“ ì´ë²¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ì˜ ì¶•ì 

ë¬¸ì œìƒí™©

- ì±„íŒ…í™”ë©´ì—ì„œ ë‚˜ê°ˆ ë•Œ, ì†Œì¼“ ì—°ê²°ì´ í•´ì œë¨ê³¼ ë™ì‹œì— Socket ì´ë²¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ í•´ì œë˜ì§€ ì•Šê³  ì¶•ì ë˜ëŠ” í˜„ìƒ ë°œìƒ
    
    <img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/8cbfde01-4d39-430e-967c-5003819f5fc1">
    
    <img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/5739a145-8b68-41bf-869c-e2a15863a723">
    
    <img src="https://github.com/constdreamcoder/SwiftPrac/assets/95998675/90c8ebcf-9b27-40d1-a684-754e3f0bd81c">
    

ë¬¸ì œ ì›ì¸ íŒŒì•…

- ì†Œì¼“ ì—°ê²° í•´ì œì™€ ë™ì‹œì— ëª¨ë“  ì´ë²¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ì‚­ì œë˜ì§€ ì•Šì•„ ë‚¨ì•„ ìˆìŒ

í•´ê²°ë°©ë²•

- ì†Œì¼“ ì—°ê²° í•´ì œì™€ ë™ì‹œì— ëª¨ë“  ì´ë²¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ì‚­ì œí•´ì¤Œìœ¼ë¡œì¨ ë¬¸ì œ í•´ê²°
    <details>
    <summary><b>ì†Œì¼“ ì´ë²¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ì‚­ì œ ì½”ë“œ</b></summary>
    <div markdown="1">

    ```swift
    func removeAllEventHandlers() {
        print("Clear up all handlers.")
        print("socket handler count", socket?.handlers.count)
        socket?.removeAllHandlers() // ì†Œì¼“ ì´ë²¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ì‚­ì œ
    }
    ```

    </div>
    </details>
